os:
  - linux
  - osx

language: d
sudo: required
dist: bionic

addons:
  apt:
    packages:
      - libfreetype6-dev
      - libgl1-mesa-dev
      - libglew-dev
      - libjpeg8-dev
      - libopenal-dev
      - libpthread-stubs0-dev
      - libsndfile1-dev
      - libx11-dev
      - libx11-xcb-dev
      - libxrandr-dev
      - libxcb-image0-dev
      - libxcb-randr0-dev
      - libudev-dev
      - libvorbis-dev
      - libflac-dev

d:
  - dmd
  - gdc
  - ldc

matrix:
  exclude:
  - os: osx
    d: gdc

# Download and install SFML and CSFML
install:
  - git submodule update --init --recursive
  - cd SFML
  - cmake -DCMAKE_INSTALL_PREFIX=/usr .
  - make
  - sudo make install
  - cd ../CSFML
  - cmake -DCMAKE_INSTALL_PREFIX=/usr .
  - make
  - sudo make install
  - cd ..

script:
  - dub build --arch=x86_64
  - dub build --arch=x86
